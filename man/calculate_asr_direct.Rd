% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_asr_direct.R
\name{calculate_asr_direct}
\alias{calculate_asr_direct}
\title{Calculate Age-Standardised Incidence Rates with Confidence Intervals}
\usage{
calculate_asr_direct(
  .df,
  cases_col,
  population_col,
  standard_pop,
  conf_level = 0.95,
  multiplier = 1e+05
)
}
\arguments{
\item{.df}{A data frame containing age-specific case counts and population data}

\item{cases_col}{Character string specifying the column name for case counts}

\item{population_col}{Character string specifying the column name for population sizes}

\item{standard_pop}{Numeric vector of standard population weights for each age group}

\item{conf_level}{Confidence level for confidence intervals (default: 0.95)}

\item{multiplier}{Multiplier for rate expression (default: 100000 for rates per 100,000)}
}
\value{
A tibble containing:
\itemize{
\item \strong{crude_rate}: Crude incidence rate
\item \strong{crude_rate_scaled}: Crude rate multiplied by multiplier
\item \strong{asr}: Age-standardised incidence rate
\item \strong{asr_scaled}: ASR multiplied by multiplier
\item \strong{ci_lower}: Lower confidence interval bound for ASR
\item \strong{ci_upper}: Upper confidence interval bound for ASR
\item \strong{ci_lower_scaled}: Lower CI multiplied by multiplier
\item \strong{ci_upper_scaled}: Upper CI multiplied by multiplier
\item \strong{conf_level}: Confidence level used
\item \strong{method}: Method used for CI calculation
\item \strong{age_specific_data}: Data frame with age-specific rates and details
}
}
\description{
This function calculates age-standardised incidence rates (ASR) using the direct
standardisation method with gamma distribution-based confidence intervals.
The gamma method is preferred as it naturally prevents negative confidence
interval bounds and is the standard approach in epidemiological literature.
}
\details{
The function uses the gamma distribution method for confidence interval calculation,
which is the standard approach in epidemiological software like epitools.
This method naturally prevents negative confidence interval bounds and is
appropriate for rate data.

The direct standardisation method calculates ASR as:
ASR = Σ(w_i × r_i) where w_i are standardised weights and r_i are age-specific rates
}
\examples{
# Example data
pop_data <- data.frame(
  age_group = c("0-19", "20-39", "40-59", "60-79", "80+"),
  cases = c(5, 25, 150, 300, 80),
  population = c(20000, 25000, 22000, 15000, 3000)
)

# Standard population (World Standard Population)
std_pop <- c(35000, 25000, 20000, 15000, 5000)

# Calculate ASR
result <- calculate_asr_direct(
  .df = pop_data,
  cases_col = "cases",
  population_col = "population",
  standard_pop = std_pop
)

# View results
print(result$asr_scaled)  # ASR per 100,000
print(result$ci_lower_scaled)  # Lower CI per 100,000
print(result$ci_upper_scaled)  # Upper CI per 100,000

}
\references{
Breslow, N. E., & Day, N. E. (1987). Statistical methods in cancer research.
Volume II--The design and analysis of cohort studies. IARC scientific publications, (82), 1-406.
}
