% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_person_years_by_age_strata.R
\name{calculate_person_years_by_age_strata}
\alias{calculate_person_years_by_age_strata}
\title{Calculate Person-Years by Age Strata}
\usage{
calculate_person_years_by_age_strata(
  .df,
  age_cut_points = c(0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80,
    85, 90, 95, 100, 150)
)
}
\arguments{
\item{.df}{A data frame containing individual-level follow-up data}

\item{age_cut_points}{Numeric vector of age breakpoints defining the age strata.
Default is 5-year age groups from 0 to 100+: \code{c(0, 5, 10, ..., 95, 100, 150)}.
This matches the WHO 2000-2025 Standard Population age groups. The final
age group is displayed as "[100+)" regardless of the upper cut point value.}
}
\value{
A tibble containing:
\itemize{
\item \strong{age_group}: Age group labels (factor)
\item \strong{person_years}: Total person-years of follow-up in each age group
\item \strong{events}: Number of events in each age group
}
}
\description{
This function calculates person-years of follow-up by age strata for cohort studies.
It handles age transitions during follow-up by splitting person-time contributions
across age groups as individuals age during the observation period.
}
\details{
The function requires the following columns in \code{.df}:
\itemize{
\item \strong{patient_id}: Unique identifier for each individual
\item \strong{dob}: Date of birth (Date class)
\item \strong{study_entry_date}: Date of study entry (Date class)
\item \strong{study_exit_date}: Date of study exit/end of follow-up (Date class)
\item \strong{event_status}: Event indicator (integer: 1 = event occurred, 0 = censored)
}

The function automatically handles individuals who transition between age groups
during follow-up by splitting their person-time contributions appropriately.
}
\examples{
# Example data
cohort_data <- data.frame(
  patient_id = 1:3,
  dob = as.Date(c("1960-01-15", "1955-06-20", "1972-09-01")),
  study_entry_date = as.Date(c("2020-03-01", "2021-01-01", "2019-01-01")),
  study_exit_date = as.Date(c("2024-06-15", "2025-12-31", "2022-04-10")),
  event_status = c(1L, 0L, 1L)
)

# Calculate person-years by 5-year age groups
result <- calculate_person_years_by_age_strata(cohort_data)

# Custom age groups
custom_ages <- c(0, 20, 40, 60, 80, 100)
result_custom <- calculate_person_years_by_age_strata(cohort_data, custom_ages)

}
